import{T as _}from"./bootstrap.esm-l9cKv-78.js";import{_ as h,c as f,b as g,a as t,x as d,z as c,A as m,u,F as b,r as v,o as w}from"./index---NC4WJo.js";var y={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"peggy123",VITE_TEXT:"這是部署的環境",BASE_URL:"/Raiko/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:T}=y;let n=null;const x={data(){return{user:{username:"",password:""},toastTitle:"",toastContent:"",isLoading:!1,fallPage:!1}},methods:{login(){const a=`${T}/admin/signin`;this.isLoading=!0,this.$http.post(a,this.user).then(s=>{this.toastTitle="登入成功",this.toastContent="已登入成功",n.show();const{token:l,expired:r}=s.data;document.cookie=`hexToken=${l}; expires=${new Date(r)}`,this.$router.push("admin/adminhome")}).catch(s=>{this.toastTitle="登入失敗",this.toastContent="帳號或密碼錯誤，請重新登入",n.show(),this.user.password=""}).finally(()=>{this.isLoading=!1})}},mounted(){n=new _(document.getElementById("toast"))}},V={class:"container"},E={class:"row py-30 justify-content-center align-items-center"},L=t("div",{class:"col-12 col-md-6 col-lg-5 d-flex justify-content-center"},[t("img",{class:"login-image",src:"https://i.imgur.com/lowirph.png",alt:""})],-1),k={class:"col-12 col-md-6 col-lg-5"},C=t("h2",{class:"h3 mb-8 border-bottom border-yellow-200 border-5 d-inline-block pb-3 text-secondary"}," 登入後台 ",-1),D={class:"form-floating mb-3"},R=t("label",{for:"username"},"Email",-1),S={class:"form-floating"},B=t("label",{for:"password"},"密碼",-1),I={id:"toast",class:"toast hide toast-container position-fixed toast-placement",role:"alert","aria-live":"assertive","aria-atomic":"true"},U={class:"toast-header mb-0"},A={class:"me-auto"},M=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"toast","aria-label":"Close"},null,-1),P={class:"toast-body"};function j(a,s,l,r,o,i){const p=v("VueLoading");return w(),f(b,null,[g(p,{active:o.isLoading},null,8,["active"]),t("div",V,[t("div",E,[L,t("div",k,[C,t("form",{id:"form",class:"login-form text-secondary",onSubmit:s[3]||(s[3]=d((...e)=>i.login&&i.login(...e),["prevent"]))},[t("div",D,[c(t("input",{type:"email",class:"form-control",id:"username",placeholder:"name@example.com","onUpdate:modelValue":s[0]||(s[0]=e=>o.user.username=e),required:"",autofocus:""},null,512),[[m,o.user.username]]),R]),t("div",S,[c(t("input",{type:"password",class:"form-control",id:"password",placeholder:"password","onUpdate:modelValue":s[1]||(s[1]=e=>o.user.password=e),required:""},null,512),[[m,o.user.password]]),B]),t("button",{class:"btn btn-secondary w-100 py-2 mt-10",type:"submit",onSubmit:s[2]||(s[2]=d((...e)=>i.login&&i.login(...e),["prevent"]))}," 登入 ",32)],32)])])]),t("div",I,[t("div",U,[t("strong",A,u(o.toastTitle),1),M]),t("div",P,u(o.toastContent),1)])],64)}const N=h(x,[["render",j]]);export{N as default};
