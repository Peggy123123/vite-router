import{_ as D,c as d,b as a,a as e,w as v,F as b,v as S,y as g,u as n,d as V,e as E,r as c,o as r,t as p,z as T,A as C}from"./index---NC4WJo.js";var U={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"peggy123",VITE_TEXT:"這是部署的環境",BASE_URL:"/Raiko/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:x,VITE_PATH:y}=U,I={data(){return{user:{name:"",email:"",tel:"",address:""},message:"",cartData:[],addCartQty:1,final_total:0,total:0,isLoading:!0}},methods:{isPhone(i){return/^(09)[0-9]{8}$/.test(i)?!0:"需要正確的電話號碼"},showCart(){this.isLoading=!0;const i=`${x}/api/${y}/cart`;this.$http.get(i).then(t=>{this.cartData=t.data.data.carts,this.final_total=t.data.data.final_total,this.total=t.data.data.total}).catch(t=>{alert(t.response.data.message)}).finally(()=>{this.isLoading=!1})},sentOrder(){let i=this.user,t=this.message;this.isLoading=!0;const f=`${x}/api/${y}/order`;this.$http.post(f,{data:{user:i},message:t}).then(m=>{this.cartData=[],this.$refs.form.resetForm(),localStorage.setItem("orderId",m.data.orderId),this.$router.push("order_complete")}).catch(m=>{alert(m.response.data.message)}).finally(()=>{this.isLoading=!1})}},mounted(){this.showCart()}},N={class:"container my-35"},P=e("i",{class:"bi bi-arrow-left me-2"},null,-1),O=e("p",{class:"text-center"},[e("a",{class:"text-secondary","data-bs-toggle":"collapse",href:"#cart",role:"button","aria-expanded":"false","aria-controls":"collapseExample"},[e("i",{class:"bi bi-chevron-down me-3"}),V("購物車資訊")])],-1),R={class:"collapse",id:"cart"},q={class:""},A={class:"table align-middle"},B=e("thead",null,[e("tr",null,[e("th",{class:"thead-text"},"商品"),e("th",{class:"text-center thead-text"},"數量"),e("th",{class:"text-end thead-text"},"單價"),e("th",{class:"text-end thead-text"},"小計"),e("th",{class:"text-center thead-text d-none d-md-block"},"刪除")])],-1),F={height:"100"},z=["src","alt"],H=e("br",{class:"d-md-none"},null,-1),M={class:"text-center"},Q={class:"text-end"},X={class:"fs-12 text-decoration-line-through"},j={class:"fs-14"},G={class:"text-end fs-14"},J={class:"text-center"},K=["onClick"],W=e("i",{class:"bi bi-trash-fill"},null,-1),Y=[W],Z={key:0},$=e("p",{class:"text-center mb-0"},"購物車內還沒有商品",-1),ee=[$],te={class:"row"},se=e("h2",{class:"h5 mb-5"},"填寫顧客資料",-1),le={class:"col-lg-4"},oe=E('<div class="bg-light p-5 mb-8"><h3 class="fs-14 mb-3">寄送地點</h3><select class="form-select form-select-sm pad-width-change-50 mb-8" aria-label="Default select example"><option selected value="台灣本島">台灣本島</option><option value="台灣離島">台灣離島</option></select><h3 class="fs-14 mb-3">收貨方式</h3><select class="form-select form-select-sm pad-width-change-50 mb-8" aria-label="Default select example"><option selected value="宅配">宅配</option><option value="超商取貨(7-11)">超商取貨(7-11)</option><option value="超商取貨(全家)">超商取貨(全家)</option></select><h3 class="fs-14 mb-3">付款資料</h3><select class="form-select form-select-sm pad-width-change-50" aria-label="Default select example"><option selected value="信用卡">信用卡</option><option value="LinePay">LinePay</option><option value="宅配取貨付款">宅配取貨付款</option><option value="超商代碼">超商代碼</option></select></div>',1),ae={class:"table table-borderless mb-10 mb-md-5"},ne=e("thead",null,[e("tr",{class:"thead-text border-bottom"},[e("th",null,"訂單小計"),e("td")])],-1),ie={class:"fs-14"},de=e("td",null,"合計金額",-1),ce={class:"border-bottom fs-14"},re=e("td",null,"優惠折抵",-1),me={class:"fw-bold"},_e=e("td",{class:"text-primary"},"總金額",-1),he={class:"text-primary"},ue={class:"col-lg-8"},pe={class:"bg-light p-5"},be={class:"mb-3"},fe=e("label",{for:"email",class:"form-label thead-text"},"Email",-1),ve={class:"mb-3"},ge=e("label",{for:"name",class:"form-label form-label-text thead-text"},"收件人姓名",-1),xe={class:"mb-3"},ye=e("label",{for:"tel",class:"form-label thead-text"},"收件人電話",-1),Ve={class:"mb-3"},Le=e("label",{for:"address",class:"form-label thead-text"},"收件人地址",-1),ke={class:"mb-3"},we=e("label",{for:"message",class:"form-label thead-text"},"訂單備註",-1),De={class:"text-end mt-8"};function Se(i,t,f,m,s,_){const L=c("VueLoading"),k=c("router-link"),h=c("v-field"),u=c("error-message"),w=c("v-form");return r(),d(b,null,[a(L,{active:s.isLoading},null,8,["active"]),e("div",N,[a(k,{class:"d-inline-block my-8 link-secondary",to:"/cart"},{default:v(()=>[P,V("返回購物車")]),_:1}),O,e("div",R,[e("div",q,[e("table",A,[B,e("tbody",null,[s.cartData?(r(),d(b,{key:0},[(r(!0),d(b,null,S(s.cartData,l=>(r(),d("tr",{key:l.id},[e("td",F,[e("img",{src:l.product.imageUrl,alt:l.product.title,width:"100",class:"rounded-2 me-5 mb-3 mb-md-0"},null,8,z),H,e("span",null,n(l.product.title),1)]),e("td",null,[e("div",M,n(l.qty),1)]),e("td",Q,[e("div",X,n(l.product.origin_price.toLocaleString()),1),e("div",j,"NT."+n(l.product.price.toLocaleString()),1)]),e("td",G,"NT."+n((l.product.price*l.qty).toLocaleString()),1),e("td",J,[e("span",{class:"text-danger",onClick:o=>i.deleteItem("single",l),style:{cursor:"pointer"}},Y,8,K)])]))),128)),s.cartData.length<1?(r(),d("div",Z,ee)):g("",!0)],64)):g("",!0)])])])]),e("div",te,[se,e("div",le,[oe,e("table",ae,[ne,e("tbody",null,[e("tr",ie,[de,e("td",null,n(s.total.toLocaleString())+" 元",1)]),e("tr",ce,[re,e("td",null,n(s.total-s.final_total)+" 元",1)]),e("tr",me,[_e,e("td",he,n(s.final_total.toLocaleString())+" 元",1)])])])]),e("div",ue,[e("div",pe,[a(w,{ref:"form",onSubmit:_.sentOrder},{default:v(({errors:l})=>[e("div",be,[fe,a(h,{id:"email",name:"email",type:"email",class:p(["form-control",{"is-invalid":l.email}]),rules:"email|required",placeholder:"請輸入 Email",modelValue:s.user.email,"onUpdate:modelValue":t[0]||(t[0]=o=>s.user.email=o)},null,8,["class","modelValue"]),a(u,{name:"email",class:"invalid-feedback"})]),e("div",ve,[ge,a(h,{id:"name",name:"姓名",type:"text",class:p(["form-control",{"is-invalid":l.姓名}]),placeholder:"請輸入姓名",rules:"required",modelValue:s.user.name,"onUpdate:modelValue":t[1]||(t[1]=o=>s.user.name=o)},null,8,["class","modelValue"]),a(u,{name:"姓名",class:"invalid-feedback"})]),e("div",xe,[ye,a(h,{id:"tel",name:"電話",type:"text",class:p(["form-control",{"is-invalid":l.電話}]),placeholder:"請輸入電話",rules:_.isPhone,modelValue:s.user.tel,"onUpdate:modelValue":t[2]||(t[2]=o=>s.user.tel=o)},null,8,["class","rules","modelValue"]),a(u,{name:"電話",class:"invalid-feedback"})]),e("div",Ve,[Le,a(h,{id:"address",name:"地址",type:"text",class:p(["form-control",{"is-invalid":l.地址}]),placeholder:"請輸入地址",rules:"required",modelValue:s.user.address,"onUpdate:modelValue":t[3]||(t[3]=o=>s.user.address=o)},null,8,["class","modelValue"]),a(u,{name:"地址",class:"invalid-feedback"})]),e("div",ke,[we,T(e("textarea",{id:"message",class:"form-control",placeholder:"有什麼想告訴賣家的嗎？",cols:"30",rows:"3","onUpdate:modelValue":t[4]||(t[4]=o=>s.message=o)},null,512),[[C,s.message]])]),e("div",De,[e("button",{type:"submit",class:"btn btn-primary text-white pad-width-change-25",onSubmit:t[5]||(t[5]=(...o)=>_.sentOrder&&_.sentOrder(...o))},"確認訂購",32)])]),_:1},8,["onSubmit"])])])])])],64)}const Te=D(I,[["render",Se]]);export{Te as default};
